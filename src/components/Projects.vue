<template>
  <!-- í”„ë¡œì íŠ¸ ì„¹ì…˜: íŒ¨ë”©ê³¼ ë§ˆì§„ ì ìš© -->
  <section id="projects" class="p-4 mb-4">
    <!-- ì„¹ì…˜ ì œëª©: ë°˜ì‘í˜• í°íŠ¸ í¬ê¸°, êµµì€ ê¸€ì”¨, ë§ˆì§„ ì ìš©, í˜¸ë²„ ì‹œ í¬ê¸° ë³€í™” íš¨ê³¼ -->
    <h2 class="text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-gray-800 flex items-center transform transition-transform hover:scale-105 duration-300">
      <!-- ì•„ì´ì½˜: ìš°ì¸¡ ë§ˆì§„, í†µí†µ íŠ€ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì ìš© -->
      <span class="mr-2 sm:mr-3 text-xl sm:text-2xl animate-bounce">ğŸ’»</span> PROJECTS
    </h2>
    <!-- í”„ë¡œì íŠ¸ ì¹´ë“œ ê·¸ë¦¬ë“œ: ëª¨ë°”ì¼ì—ì„œ ë‹¨ì¼ ì—´, ë°ìŠ¤í¬íƒ‘ì—ì„œ 2ì—´ ë°°ì¹˜ -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
      <!-- v-forë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ì¹´ë“œ ìƒì„± -->
      <div
        v-for="(project, index) in projects"
        :key="index"
        class="bg-white rounded-xl p-4 sm:p-6 shadow-md hover:shadow-xl transition-all duration-500 border border-gray-100 transform hover:-translate-y-2 flex flex-col min-h-[380px]"
      >
        <!-- ìƒë‹¨ ì •ë³´ ì˜ì—­: í”„ë¡œì íŠ¸ ìœ í˜• ë° ì œëª© -->
        <div class="mb-3 sm:mb-4">
          <!-- í”„ë¡œì íŠ¸ ìœ í˜• íƒœê·¸: ê·¸ë¼ë°ì´ì…˜ ë°°ê²½, ë‘¥ê·¼ ëª¨ì„œë¦¬ -->
          <span class="inline-block bg-gradient-to-r from-red-400 to-red-500 text-white text-xs font-medium py-1 px-3 rounded-full mb-2">{{ project.type }}</span>
          <!-- í”„ë¡œì íŠ¸ ì œëª©: ë°˜ì‘í˜• í°íŠ¸, êµµì€ ê¸€ì”¨, ë§ˆì§„ ì ìš© -->
          <h3 class="text-lg sm:text-xl font-bold text-gray-800 mt-2 mb-2 sm:mb-3 flex flex-wrap items-center">
            {{ project.title }}
            <!-- í”„ë¡œì íŠ¸ ì¢…ë¥˜ íƒœê·¸: ì‘ì€ í°íŠ¸, ë°°ê²½ìƒ‰, ë‘¥ê·¼ ëª¨ì„œë¦¬ -->
            <span class="ml-2 text-xs" :class="project.categoryClass">{{ project.category }}</span>
          </h3>
        </div>

        <!-- ê¸°ìˆ  ìŠ¤íƒ ì˜ì—­: í”Œë ‰ìŠ¤ ë ˆì´ì•„ì›ƒ, ê°„ê²© ì„¤ì • -->
        <div class="flex flex-wrap gap-1.5 sm:gap-2 mb-3 sm:mb-4">
          <!-- ê° ê¸°ìˆ  íƒœê·¸: íšŒìƒ‰ ë°°ê²½, ë‘¥ê·¼ ëª¨ì„œë¦¬, í˜¸ë²„ íš¨ê³¼ -->
          <span
            v-for="(tech, techIndex) in project.technologies"
            :key="techIndex"
            class="bg-gray-100 text-gray-600 text-xs py-1 px-2 sm:px-3 rounded-full hover:bg-gray-200 transition-colors"
          >
            {{ tech }}
          </span>
        </div>

        <!-- í”„ë¡œì íŠ¸ ì„¤ëª… ëª©ë¡: íŒ¨ë”©, ê°„ê²© ì„¤ì • -->
        <ul class="pl-4 sm:pl-5 mb-4 sm:mb-5 space-y-1 sm:space-y-2">
          <!-- ê° ì„¤ëª… í•­ëª©: ì‘ì€ í°íŠ¸, íšŒìƒ‰ í…ìŠ¤íŠ¸, íŒŒë€ìƒ‰ ì›í˜• ë§ˆì»¤ -->
          <li v-for="(desc, descIndex) in project.descriptions" :key="descIndex" class="text-xs sm:text-sm text-gray-600 flex items-center">
            <span :class="['inline-block', 'w-1.5', 'h-1.5', project.markerColor, 'rounded-full', 'mr-1', 'sm:mr-2']"></span>
            {{ desc }}
          </li>
        </ul>

        <!-- ë§í¬ ë²„íŠ¼ ì˜ì—­: ìë™ ë§ˆì§„ìœ¼ë¡œ í•˜ë‹¨ ë°°ì¹˜, ê°„ê²© ì„¤ì •, ì¤‘ì•™/ì™¼ìª½ ì •ë ¬ ë°˜ì‘í˜• ì¡°ì • -->
        <div class="mt-auto pt-4 sm:pt-6 flex flex-wrap gap-2 sm:gap-3 justify-center sm:justify-start">
          <!-- ë™ì ìœ¼ë¡œ ë§í¬ ë²„íŠ¼ ìƒì„± -->
          <a
            v-for="(link, linkIndex) in project.links"
            :key="linkIndex"
            :href="link.url"
            target="_blank"
            :class="[
              'inline-flex',
              'items-center',
              'text-white',
              'py-1.5',
              'sm:py-2',
              'px-3',
              'sm:px-4',
              'rounded',
              'text-xs',
              'sm:text-sm',
              'font-medium',
              'hover:bg-opacity-90',
              'transition-colors',
              link.bgClass,
            ]"
          >
            <img :src="link.iconSrc" :alt="link.text" class="h-3 w-3 sm:h-4 sm:w-4 mr-1" />
            {{ link.text }}
          </a>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';

// í”„ë¡œì íŠ¸ ë§í¬ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface ProjectLink {
  url: string;
  text: string;
  bgClass: string;
  iconSrc: string;
}

// í”„ë¡œì íŠ¸ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface Project {
  type: string;
  title: string;
  category: string;
  categoryClass: string;
  technologies: string[];
  markerColor: string;
  descriptions: string[];
  links: ProjectLink[];
}

// í”„ë¡œì íŠ¸ ë°ì´í„° ë°°ì—´
const projects = ref<Project[]>([
  {
    type: 'ê°œì¸ í”„ë¡œì íŠ¸',
    title: 'ì›ì•Œì— (ONERM)',
    category: 'PWA App',
    categoryClass: 'bg-blue-100 text-blue-600 px-2 py-1 rounded-full mt-1 sm:mt-0',
    technologies: ['Vue.js', 'Express.js', 'MongoDB', 'OCI', 'Docker', 'GitHub Actions'],
    markerColor: 'bg-blue-500',
    descriptions: ['ìš´ë™ê¸°ë¡ ì›¹ì•±', 'ì£¼ìš”ê¸°ëŠ¥: ìš´ë™ê¸°ë¡, ìˆ˜í–‰ì‹œê°„, ì‰¬ëŠ”ì‹œê°„, ì˜ˆìƒ 1RM ì œê³µ'],
    links: [
      {
        url: 'https://github.com/AngryStock/onerm',
        text: 'í”„ë¡ íŠ¸ì—”ë“œ',
        bgClass: 'bg-gray-800 hover:bg-gray-700',
        iconSrc: `github-white-icon.svg`,
      },
      {
        url: 'https://github.com/yangharry/onerm',
        text: 'ë°±ì—”ë“œ',
        bgClass: 'bg-blue-600 hover:bg-blue-700',
        iconSrc: `github-white-icon.svg`,
      },
      {
        url: 'https://play.google.com/store/apps/details?id=kr.onerm.twa&hl=ko',
        text: 'ì•ˆë“œë¡œì´ë“œ',
        bgClass: 'bg-teal-600 hover:bg-teal-700',
        iconSrc: 'android-white-log.png',
      },
      {
        url: 'https://onerm.kr',
        text: 'ì›¹',
        bgClass: 'bg-green-600 hover:bg-green-700',
        iconSrc: `web-icon.svg`,
      },
    ],
  },
  {
    type: 'ê°œì¸ í”„ë¡œì íŠ¸',
    title: 'í¬íŠ¸í´ë¦¬ì˜¤ ì›¹ì‚¬ì´íŠ¸',
    category: 'Web',
    categoryClass: 'bg-purple-100 text-purple-600 px-2 py-1 rounded-full mt-1 sm:mt-0',
    technologies: ['Vue.js', 'TypeScript', 'Tailwind CSS', 'Vite'],
    markerColor: 'bg-purple-500',
    descriptions: ['ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ ì›¹ì‚¬ì´íŠ¸'],
    links: [
      {
        url: 'https://github.com/yangharry/heeil-portfolio',
        text: 'GitHub',
        bgClass: 'bg-gray-800 hover:bg-gray-700',
        iconSrc: `github-white-icon.svg`,
      },
      {
        url: 'https://yangharry.github.io/heeil-portfolio/',
        text: 'ì›¹',
        bgClass: 'bg-green-600 hover:bg-green-700',
        iconSrc: `web-icon.svg`,
      },
    ],
  },
  {
    type: 'ê°œì¸ í”„ë¡œì íŠ¸',
    title: 'ResSync',
    category: 'Android App',
    categoryClass: 'bg-amber-100 text-amber-600 px-2 py-1 rounded-full mt-1 sm:mt-0',
    technologies: ['React Native', 'Express.js', 'MongoDB', 'OCI', 'Docker', 'GitHub Actions', 'Firebase'],
    markerColor: 'bg-amber-500',
    descriptions: ['ë‹¬ë ¥ ì•±', 'ê³ ê°ì´ ì œê³µí•œ ì˜ˆì•½í…Œì´í„°ë¥¼ ë‹¬ë ¥ìœ¼ë¡œ ì œê³µ'],
    links: [
      {
        url: 'https://play.google.com/store/apps/details?id=com.ressync_app&hl=ko',
        text: 'ì•ˆë“œë¡œì´ë“œ',
        bgClass: 'bg-teal-600 hover:bg-teal-700',
        iconSrc: 'android-white-log.png',
      },
    ],
  },
]);

onMounted(() => {
  // ìŠ¤í¬ë¡¤ ì‹œ ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì¸í„°ì„¹ì…˜ ì˜µì €ë²„ ì„¤ì •
  const observerOptions: IntersectionObserverInit = {
    threshold: 0.1, // ìš”ì†Œê°€ 10% ì´ìƒ í™”ë©´ì— ë³´ì¼ ë•Œ ì½œë°± ì‹¤í–‰
  };

  // ì¸í„°ì„¹ì…˜ ì˜µì €ë²„ ìƒì„±: ìš”ì†Œê°€ í™”ë©´ì— ë³´ì¼ ë•Œ fade-in-visible í´ë˜ìŠ¤ ì¶”ê°€
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('fade-in-visible'); // ìš”ì†Œê°€ ë³´ì´ë©´ ë‚˜íƒ€ë‚˜ëŠ” íš¨ê³¼ ì ìš©
        observer.unobserve(entry.target); // í•œ ë²ˆ ì• ë‹ˆë©”ì´ì…˜ì´ ì‹¤í–‰ë˜ë©´ ê´€ì°° ì¤‘ë‹¨
      }
    });
  }, observerOptions);

  // ëª¨ë“  í”„ë¡œì íŠ¸ ì¹´ë“œ ìš”ì†Œì— fade-in í´ë˜ìŠ¤ ì¶”ê°€í•˜ê³  ì˜µì €ë²„ë¡œ ê´€ì°°
  document.querySelectorAll('#projects .grid > div').forEach((el) => {
    el.classList.add('fade-in');
    observer.observe(el);
  });
});
</script>

<style scoped>
/* í˜ì´ë“œì¸ íš¨ê³¼ ì´ˆê¸° ìƒíƒœ: íˆ¬ëª…í•˜ê³  ì•„ë˜ì—ì„œ ìœ„ë¡œ ì´ë™í•˜ëŠ” íš¨ê³¼ ì¤€ë¹„ */
.fade-in {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

/* í˜ì´ë“œì¸ íš¨ê³¼ ì™„ë£Œ ìƒíƒœ: ì™„ì „íˆ ë³´ì´ê³  ì›ë˜ ìœ„ì¹˜ë¡œ ì´ë™ */
.fade-in-visible {
  opacity: 1;
  transform: translateY(0);
}

/* ì‘ì€ í™”ë©´ì—ì„œ ê°„ê²© ë° ë ˆì´ì•„ì›ƒ ì¡°ì • */
@media (max-width: 360px) {
  .flex-wrap {
    gap: 0.5rem;
  }

  .grid-cols-3 {
    grid-template-columns: 1fr;
  }
}
</style>
